<template>
  <div class="autocomplete" show.bind="editing">
    <div class="input-group">
      <input type="text" class="form-control search-box" placeholder.bind="placeholder"
        value.two-way="value" keyup.trigger="keyUp($event) & debounce:300">
      <span class="input-group-btn" if.bind="!compact">
        <button class="btn btn-default" type="button" click.delegate="_search($event)">
          <i class="fas fa-search"></i>
        </button>
      </span>
    </div>
    <div show.bind="haveSuggestions" class="autocomplete-suggestions">
      <div class="autocomplete-suggestion" repeat.for="suggestion of suggestions" click.trigger="_select(suggestion, $event)">
        <compose view-model.bind="suggestion" view.bind="view"></compose>
      </div>
    </div>
  </div>
  <div class="autocomplete autocomplete-display" show.bind="!editing" click.trigger="toggleEdit()">
    <compose if.bind="!!selected" view-model.bind="selected" view.bind="view" ></compose>
    <div if.bind="!selected" class="autocomplete-placeholder form-control">
      ${placeholder}
    </div>
    <span class="fas fa-edit autocomplete-edit"></span>
  </div>
</template>
