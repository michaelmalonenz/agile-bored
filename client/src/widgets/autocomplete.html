<template>
  <div class="autocomplete" show.bind="editing">
    <div class="input-group">
        <input type="text" class="form-control" aria-label="Search"
          aria-describedby="search-button" placeholder.bind="placeholder"
          value.two-way="value" keyup.trigger="keyUp($event) & debounce:300">
        <div class="input-group-append" if.bind="!compact">
          <button class="btn btn-outline-secondary" type="button" click.delegate="_search($event)">
            <i class="fas fa-search"></i>
          </button>
      </div>
    </div>
    <div show.bind="haveSuggestions" class="autocomplete-suggestions">
      <div class="autocomplete-suggestion" repeat.for="suggestion of suggestions" click.trigger="_select(suggestion, $event)">
        <compose view-model.bind="suggestion" view.bind="view"></compose>
      </div>
    </div>
  </div>
  <div class="autocomplete autocomplete-display" show.bind="!editing" click.trigger="toggleEdit()">
    <compose if.bind="!!selected" view-model.bind="selected" view.bind="view" ></compose>
    <div if.bind="!selected" class="autocomplete-placeholder form-control">
      ${placeholder}
    </div>
    <span class="fas fa-edit autocomplete-edit"></span>
  </div>
</template>
