<template>
  <ux-dialog class="issue-editor">
    <ux-dialog-header>
      <h2>${heading}</h2>
    </ux-dialog-header>
    <ux-dialog-body>
      <div class="row">
        <div class="col-xs-8">
          <input type="text" class="edit-issue-title" value.bind="issue.title" placeholder="title" attach-focus.bind="!edit" />
        </div>
        <div class="col-xs-2">
          <input class="edit-control" type="text" value.bind="issue.epic.key" disabled="true" placeholder="epic" />
        </div>
        <div class="col-xs-2">
          <div class="edit-control pull-right">
            <select-dropdown value.bind="issue.issueType" options.bind="issueTypes"></select-dropdown>
          </div>
        </div>
      </div>
      <div class="edit-issue-content">
        <div class="row full-height">
          <div class="${edit ? 'col-md-8' : 'col-md-12'} full-height">
            <viewing-text-editor start-as-edit.bind="!edit" value.bind="issue.description" placeholder="description"></viewing-text-editor>
          </div>
          <div class="${edit ? 'col-md-4' : 'hidden'} full-height">
            <comments-list issue-id.bind="issue.id" comments.bind="issue.comments"></comments-list>
          </div>
        </div>
      </div>
    </ux-dialog-body>

    <ux-dialog-footer>
      <div if.bind="isModified">
        <button type="button" class="btn btn-default" click.trigger="controller.cancel()">Cancel</button>
        <button type="button" class="btn btn-primary" click.trigger="save()">Save</button>
      </div>
      <div if.bind="!isModified">
        <button type="button" class="btn btn-default" click.trigger="controller.cancel()">Close</button>
      </div>
    </ux-dialog-footer>
  </ux-dialog>
</template>
