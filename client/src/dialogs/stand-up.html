<template>
  <ux-dialog class="stand-up-dialog">
    <ux-dialog-header>
      <h2 class="d-flex justify-content-between">Stand Up
        <i if.bind="!inFullScreen" class="fa fa-expand pull-right fullscreen-action" click.delegate="fullScreen()" title="Fullscreen"></i>
        <i if.bind="inFullScreen" class="fa fa-compress pull-right fullscreen-action" click.delegate="exitFullScreen()" title="Fullscreen"></i>
      </h2>
    </ux-dialog-header>
    <ux-dialog-body css="height: ${contentHeight};">
      <div if.bind="loading" class="stand-up-loading">
        <i class="fa fa-circle-notch fa-spin"></i> Loading&hellip;
      </div>
      <div if.bind="!loading" class="stand-up-display">
        <div class="stand-up-display-area clearfix">
          <div class="stand-up-active-panel">
            <compose if.bind="displayingIssue" view="issues/stand-up-display-issue.html" view-model.bind="displayedIssue"></compose>
            <comments-list if.bind="displayingComments" issue-id.bind="displayedIssueId" comments.bind="displayedIssueComments"></comments-list>
            <!-- Consider having a history tab, also -->
          </div>
          <div class="stand-up-tabs-panel" if.bind="displaying">
            <div class="stand-up-tab" click.delegate="showView()"><i class="fa fa-eye"></i>&nbsp;View</div>
            <div class="stand-up-tab" click.delegate="showComments()"><i class="fa fa-commenting"></i>&nbsp;Comments</div>
          </div>
        </div>
        <div class="stand-up-issues">
          <div class="stand-up-issue-list">
            <div repeat.for="issue of issues">
              <compose view-model.bind="issue" view="issues/search-issue.html" click.delegate="display(issue)"></compose>
              <div class="child-issues-row">
                <compose repeat.for="child of issue.children"
                  view-model.bind="child" view="issues/search-issue.html"
                  click.delegate="display(child)"></compose>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ux-dialog-body>
  </ux-dialog>
</template>
